Here are the detailed notes on **Kafka Console Producer CLI** based on the transcript, written in Hinglish (Latin script).

-----

### **Kafka Console Producer CLI**

Is lecture mein hum seekhenge ki **Kafka Topics** ke andar data (messages) kaise bhejein using CLI (Command Line Interface).
Hum do tareeke cover karenge:

1.  **Without Key:** Data partitions mein distribute hoga.
2.  **With Key:** Same key hamesha same partition mein jayegi.

-----

#### **1. Prerequisites (Setup)**

Producer start karne se pehle, humein ek topic chahiye. Agar topic nahi hai, toh pehle create karein.
*Example Topic Name:* `first_topic`

```bash
# Command to create a topic
kafka-topics.sh --bootstrap-server <YOUR_SERVER> --create --topic first_topic --partitions 1
```

-----

#### **2. Basic Producer (Sending Data without Keys)**

Sabse pehle hum simple text messages bhejenge. Is case mein **Key = Null** hoti hai.

**Command:**

```bash
kafka-console-producer.sh --bootstrap-server <YOUR_SERVER> --topic first_topic --producer.config playground.config
```

*(Note: Localhost par `--producer.config` ki zarurat nahi hoti)*

**Interactive Shell:**
Jab aap command run karenge, toh aapko ek arrow (`>`) dikhega. Iska matlab producer ready hai.

  * Type: `hello world` -\> Enter (Message Sent)
  * Type: `my name is Stephane` -\> Enter (Message Sent)
  * **Exit:** `Ctrl + C` dabayein producer band karne ke liye.

**Text Diagram: Basic Flow**

```text
[ Terminal ]                  [ Kafka Cluster ]
   > hello world      ----->   (Topic: first_topic)
   > I love Kafka     ----->   (Appended to Log)
```

-----

#### **3. Producer with Properties (Safety Settings)**

Hum producer ko extra settings (properties) ke sath bhi chala sakte hain. Ek common property hai `acks=all`.

  * **acks=all:** Iska matlab Producer tab tak wait karega jab tak saare Brokers (Leader + Replicas) data confirm na kar dein.

**Command:**

```bash
kafka-console-producer.sh --bootstrap-server <YOUR_SERVER> --topic first_topic --producer-property acks=all
```

*User Experience:* Terminal par kuch alag nahi dikhega, lekin background mein data safety badh gayi hai.

[Image of Kafka broker architecture]

-----

#### **4. Producing to a Non-Existent Topic (Important Behavior)**

Agar aap aise topic par data bhejte hain jo exist nahi karta (`new_topic`), toh kya hoga?

**Scenario A: Conduktor Cloud / Production (Strict Mode)**

  * **Result:** Error aayega (`Topic not in metadata`).
  * **Reason:** Production mein **Auto Create Topic** disable hota hai taaki galti se naye topics na ban jayein.

**Scenario B: Localhost (Default Mode)**

  * **Result:** Pehle ek warning aayegi (`Leader not available`), phir Kafka automatically topic create kar dega.
  * **Default Settings:** Usually 1 Partition ke saath create hota hai (ye `server.properties` mein change kar sakte hain).
  * **Best Practice:** Hamesha Topic ko pehle explicitly create karein, auto-create par depend na karein.

-----

#### **5. Producing with Keys (Key-Value Pairs)**

Ab hum messages ke sath **Keys** bhejenge.

  * **Logic:** Kafka ensure karta hai ki **Same Key** wala data hamesha **Same Partition** mein jaye (Ordering ke liye).

Humein producer ko batana padega ki:

1.  Humein Key parse karni hai (`parse.key=true`).
2.  Key aur Value ke beech mein separator kya hai (`key.separator=:`).

**Command:**

```bash
kafka-console-producer.sh --bootstrap-server <YOUR_SERVER> --topic first_topic --property parse.key=true --property key.separator=:
```

**Interactive Shell (Input Format):**
Ab aapko `key:value` format mein type karna hoga.

  * Type: `example key:example value` -\> Enter
  * Type: `name:Stephane` -\> Enter
  * Type: `id_123:user data` -\> Enter

[Image of Kafka message structure]

**Important Notes:**

  * Agar aap separator (`:`) bhool gaye, toh `Exception` aayega aur Producer crash ho jayega.
  * **Verification:** Agar aap UI (Conduktor) mein dekhenge, toh ab "Key" column mein data dikhega (pehle Null tha).

**Text Diagram: Key Handling**

```text
Input:  "name:Stephane"
          |     |
          v     v
        Key   Value

Kafka Logic: Hash(Key) -> Decide Partition
Result: All messages with key "name" go to same partition.
```

-----

### **Summary Checklist**

  * [x] **Simple Producer:** `kafka-console-producer.sh` use karke text bhejna.
  * [x] **Exit:** `Ctrl + C` se bahar aana.
  * [x] **Acks:** `--producer-property acks=all` safety ke liye.
  * [x] **Non-Existent Topic:** Production mein error deta hai, Localhost par auto-create karta hai.
  * [x] **Keys:** `--property parse.key=true` aur `--property key.separator=:` use karna ordering ke liye.

-----

**Next Step:** Producer seekh liya\! Ab data read karne ke liye **Kafka Console Consumer CLI** ke notes chahiye?